(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{31:function(e,t,a){e.exports=a(32)},32:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),s=a(7),i=a(15),l=a(14),o=a(0),c=a.n(o),u=a(29),d=a.n(u),h=a(13),m=a(1),p=(a(37),a(9)),g=a.n(p);var E=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={username:"",password:""},r.props.location&&r.setState({token:r.props.location.state.token}),r.handleUsernameChange=r.handleUsernameChange.bind(Object(s.a)(r)),r.handlePasswordChange=r.handlePasswordChange.bind(Object(s.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(s.a)(r)),r}return Object(r.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),g()({method:"get",url:"/api/login",auth:{username:this.state.username,password:this.state.password}}).then((function(e){t.setState({redirect:"/",token:e.data.token})})).catch((function(e){t.setState({error:e.statusText})}))}},{key:"render",value:function(){if(this.state.redirect)return c.a.createElement(m.a,{to:{pathname:this.state.redirect,state:{token:this.state.token}}});var e=this.state.error?c.a.createElement("p",null,this.state.error):c.a.createElement("p",null);return c.a.createElement("div",null,c.a.createElement("p",null,"Don't have an account? ",c.a.createElement(h.b,{to:"/newaccount"},"Sign up")),e,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("label",{htmlFor:"username"},"Username"),c.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleUsernameChange}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",id:"password",value:this.state.password,onChange:this.handlePasswordChange}),c.a.createElement("input",{type:"submit",value:"Log in"})))}}]),a}(c.a.Component),b=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={username:"",password1:"",password2:""},r.handleUsernameChange=r.handleUsernameChange.bind(Object(s.a)(r)),r.handlePassword1Change=r.handlePassword1Change.bind(Object(s.a)(r)),r.handlePassword2Change=r.handlePassword2Change.bind(Object(s.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(s.a)(r)),r}return Object(r.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword1Change",value:function(e){this.setState({password1:e.target.value})}},{key:"handlePassword2Change",value:function(e){this.setState({password2:e.target.value}),this.state.password1!==this.state.password2?this.setState({smallError:"Passwords must match"}):this.setState({smallError:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.state.username?this.state.password1===this.state.password2?this.state.password1?g()({method:"post",url:"/api/createaccount",data:{username:this.state.username,password:this.state.password}}).then((function(e){t.setState({redirect:"/",token:e.data.token})})).catch((function(e){t.setState({error:e.statusText})})):this.setState({smallError:"No password provided"}):this.setState({smallError:"Passwords must match"}):this.setState({smallError:"No username provided"})}},{key:"render",value:function(){if(this.state.redirect)return c.a.createElement(m.a,{to:{pathname:this.state.redirect,state:{token:this.state.token}}});var e=this.state.error?c.a.createElement("p",null,this.state.error):c.a.createElement("p",null),t=this.state.smallError?c.a.createElement("p",null,this.state.smallError):c.a.createElement("p",null);return c.a.createElement("div",null,c.a.createElement("p",null,"Already have an account? ",c.a.createElement(h.b,{to:"/login"},"Log in")),e,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("label",{htmlFor:"username"},"Username"),c.a.createElement("input",{type:"text",id:"username",value:this.state.username,onChange:this.handleUsernameChange}),c.a.createElement("label",{htmlFor:"password1"},"Password"),c.a.createElement("input",{type:"password",id:"password1",value:this.state.password1,onChange:this.handlePassword1Change}),c.a.createElement("label",{htmlFor:"password2"},"Retype Password"),c.a.createElement("input",{type:"password",id:"password2",value:this.state.password2,onChange:this.handlePassword2Change}),c.a.createElement("input",{type:"submit",value:"Create account"})),t)}}]),a}(c.a.Component),v=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={priceListings:[],token:""},r.props.location&&r.setState({token:r.props.location.state.token}),r.fetchListings(),r}return Object(r.a)(a,[{key:"fetchListings",value:function(){var e=this;g()({method:"get",url:"/api/adminpricelistings",headers:{Authorization:"Bearer ".concat(this.state.token)}}).then((function(t){e.setState({priceListings:t.data.priceListings})})).catch((function(t){401===t.status?e.setState({redirect:"/login"}):403===t.status||e.setState({error:t.data.error})}))}},{key:"updateListing",value:function(e){var t=this;g()({method:"post",url:"/api/adminpricelistings/update",headers:{Authorization:"Bearer ".concat(this.state.token)},data:{update:{ingredientName:e.ingredientName,source:e.source,timeCreated:e.timeCreated},set:{price:e.price}}}).then((function(e){t.fetchListings()})).catch((function(e){401===e.status?t.setState({redirect:"/login"}):403===e.status||t.setState({error:e.data.error})}))}},{key:"deleteListing",value:function(e){var t=this;g()({method:"post",url:"/api/adminpricelistings/delete",headers:{Authorization:"Bearer ".concat(this.state.token)},data:{ingredientName:e.ingredientName,source:e.source,timeCreated:e.timeCreated}}).then((function(e){t.fetchListings()})).catch((function(e){401===e.status?t.setState({redirect:"/login"}):403===e.status||t.setState({error:e.data.error})}))}},{key:"setNewPrice",value:function(e,t){this.setState({priceListings:this.state.priceListings.map((function(a){return a.ingredientName===e.ingredientName&&a.source===e.source&&a.timeCreated===e.timeCreated?{ingredientName:a.ingredientName,source:a.source,timeCreated:a.timeCreated,price:t}:a}))})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return c.a.createElement(m.a,{to:{pathname:this.state.redirect,state:{token:this.state.token}}});var t=this.state.priceListings.map((function(t){return c.a.createElement("tr",{key:"".concat(t.ingredientName,":").concat(t.source,":").concat(t.timeCreated)},c.a.createElement("td",null,t.ingredientName),c.a.createElement("td",null,"$",c.a.createElement("input",{type:"number",min:"0",step:"0.01",value:t.price,onChange:function(){return e.setNewPrice(t,t.price)}})),c.a.createElement("td",null,t.source),c.a.createElement("td",null,t.timeCreated),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.updateListing(t)}},"Update")),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.deleteListing(t)}},"X")))}));return c.a.createElement("div",null,c.a.createElement("table",null,t),c.a.createElement("p",null,this.state.error))}}]),a}(c.a.Component);d.a.render(c.a.createElement(h.a,null,c.a.createElement("div",null,c.a.createElement(m.d,null,c.a.createElement(m.b,{path:"/login"},c.a.createElement(E,null)),c.a.createElement(m.b,{path:"/newaccount"},c.a.createElement(b,null)),c.a.createElement(m.b,{path:"/"},"// temporary until we implement main page",c.a.createElement(m.a,{to:"/login"})),c.a.createElement(m.b,{path:"/listings"},c.a.createElement(m.a,{to:"/login"})),c.a.createElement(m.b,{path:"/adminlistings"},c.a.createElement(v,null))))),document.getElementById("root"))},37:function(e,t,a){}},[[31,1,2]]]);
//# sourceMappingURL=main.0e0c2015.chunk.js.map