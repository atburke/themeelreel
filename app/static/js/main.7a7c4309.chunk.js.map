{"version":3,"sources":["index.js"],"names":["AppHeader","props","toListings","bind","toMealPlanner","toAdminListings","state","redirect","e","preventDefault","this","followLink","route","console","log","here","setState","to","pathname","token","href","onClick","React","Component","LoginPage","username","password","location","handleUsernameChange","handlePasswordChange","handleSubmit","event","target","value","axios","method","url","auth","then","response","data","catch","error","statusText","errorMessage","onSubmit","htmlFor","type","id","onChange","CreateAccountPage","password1","password2","handlePassword1Change","handlePassword2Change","smallError","smallErrorMessage","PlanMealPage","PriceListingPage","ingredientSuggestions","unitSuggestions","ingredientSearchTerm","unitSearchTerm","newIngredientName","newIngredientSource","newIngredientPrice","newIngredientUnits","searchIngredient","searchUnit","fetchNeededPriceListing","setPrice","setAmount","selectUnits","selectIngredient","selectSource","addPriceListing","searchTerm","headers","params","kw","results","status","result","ingredientName","units","newIngredientAmount","newListing","price","amount","source","forEach","field","message","ingredientOptions","unitOptions","form","map","name","unit","min","step","PriceListingAdminPage","priceListings","fetchListings","listing","timeCreated","l","listings","key","updateListingLocally","updateListing","deleteListing","ReactDOM","render","exact","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.7a7c4309.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\nimport './index.css';\nimport axios from 'axios';\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/login\" component={LoginPage} />\n          <Route exact path=\"/newaccount\" component={CreateAccountPage} />\n          <Route exact path=\"/\" component={PlanMealPage} />\n          <Route exact path=\"/listings\" component={PriceListingPage} />\n          <Route exact path=\"/adminlistings\" component={PriceListingAdminPage} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nclass AppHeader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toListings = this.toListings.bind(this);\n    this.toMealPlanner = this.toMealPlanner.bind(this);\n    this.toAdminListings = this.toAdminListings.bind(this);\n\n    this.state = {\n      redirect: ''\n    };\n  }\n\n  toListings(e) {\n    e.preventDefault();\n    this.followLink(\"/listings\");\n  }\n\n  toMealPlanner(e) {\n    e.preventDefault();\n    this.followLink(\"/\");\n  }\n\n  toAdminListings(e) {\n    e.preventDefault();\n    this.followLink(\"/adminlistings\")\n  }\n\n  followLink(route) {\n    console.log(`redirecting to ${route}`)\n    if (route !== this.props.here) {\n      this.setState({redirect: route});\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.props.token}\n      }} />;\n    }\n\n    return (\n      <nav>\n        <ul>\n          <li><a href=\"/\" onClick={this.toMealPlanner}>Meal Planner</a></li>\n          <li><a href=\"/listings\" onClick={this.toListings}>Listings</a></li>\n          <li><a href=\"/adminlistings\" onClick={this.toAdminListings}>Admin listings</a></li>\n        </ul>\n      </nav>\n    )\n  }\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      redirect: '',\n      token: ''\n    };\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    }\n\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePasswordChange(event) {\n    this.setState({password: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axios({\n      method: 'get',\n      url: '/api/login',\n      auth: {\n        username: this.state.username,\n        password: this.state.password\n      }\n    }).then(response => {\n      console.log(\"logged in!\");\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      console.log(error.data);\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(`redirecting to ${this.state.redirect}`);\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    return (\n      <div>\n      <p>Don't have an account? <Link to=\"/newaccount\">Sign up</Link></p>\n      {errorMessage}\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"username\">Username</label>\n          <input type=\"text\" id=\"username\" value={this.state.username} onChange={this.handleUsernameChange} />\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" id=\"password\" value={this.state.password} onChange={this.handlePasswordChange} />\n          <input type=\"submit\" value=\"Log in\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nclass CreateAccountPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password1: '',\n      password2: '',\n      redirect: ''\n    };\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePassword1Change = this.handlePassword1Change.bind(this);\n    this.handlePassword2Change = this.handlePassword2Change.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePassword1Change(event) {\n    this.setState({password1: event.target.value});\n  }\n\n  handlePassword2Change(event) {\n    this.setState({password2: event.target.value});\n    if (this.state.password1 !== this.state.password2) {\n      this.setState({smallError: 'Passwords must match'});\n    } else {\n      this.setState({smallError: ''});\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (!this.state.username) {\n      this.setState({smallError: 'No username provided'});\n      return;\n    }\n\n    if (this.state.password1 !== this.state.password2) {\n      this.setState({smallError: 'Passwords must match'});\n      return;\n    }\n\n    if (!this.state.password1) {\n      this.setState({smallError: 'No password provided'});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/createaccount',\n      auth: {\n        username: this.state.username,\n        password: this.state.password1\n      }\n    }).then(response => {\n      console.log(\"redirecting to /\")\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    let smallErrorMessage = this.state.smallError ? <p>{this.state.smallError}</p> : <p></p>;\n    return (\n      <div>\n      <p>Already have an account? <Link to=\"/login\">Log in</Link></p>\n      {errorMessage}\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"username\">Username</label>\n          <input type=\"text\" id=\"username\" value={this.state.username} onChange={this.handleUsernameChange} />\n          <label htmlFor=\"password1\">Password</label>\n          <input type=\"password\" id=\"password1\" value={this.state.password1} onChange={this.handlePassword1Change} />\n          <label htmlFor=\"password2\">Retype Password</label>\n          <input type=\"password\" id=\"password2\" value={this.state.password2} onChange={this.handlePassword2Change} />\n          <input type=\"submit\" value=\"Create account\" />\n        </form>\n      {smallErrorMessage}\n      </div>\n    );\n  }\n}\n\nclass PlanMealPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing plan meal page\");\n    super(props);\n    this.state = {\n      token: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n  }\n\n  render() {\n    console.log(\"rendering plan meal page\");\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    return (\n      <div>\n        <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <p>NOTHING TO SEE HERE</p>\n      </div>\n    );\n  }\n}\n\nclass PriceListingPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing price listings\");\n    super(props);\n    this.state = {\n      ingredientSuggestions: [],\n      unitSuggestions: [],\n      token: '',\n      ingredientSearchTerm: '',\n      unitSearchTerm: '',\n      newIngredientName: '',\n      newIngredientSource: '',\n      newIngredientPrice: 0,\n      newIngredientUnits: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.searchIngredient = this.searchIngredient.bind(this);\n    this.searchUnit = this.searchUnit.bind(this);\n    this.fetchNeededPriceListing = this.fetchNeededPriceListing.bind(this);\n    this.setPrice = this.setPrice.bind(this);\n    this.setAmount = this.setAmount.bind(this);\n    this.selectUnits = this.selectUnits.bind(this);\n    this.selectIngredient = this.selectIngredient.bind(this);\n    this.selectSource = this.selectSource.bind(this);\n    this.addPriceListing = this.addPriceListing.bind(this);\n  }\n\n  searchIngredient(e) {\n    let searchTerm = e.target.value;\n    this.setState({ingredientSearchTerm: searchTerm});\n    if (!searchTerm) {\n      this.setState({ingredientSuggestions: []});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/search/ingredient',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      params: {\n        kw: searchTerm\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({ingredientSuggestions: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  searchUnit(e) {\n    let searchTerm = e.target.value;\n    this.setState({unitSearchTerm: searchTerm});\n    if (!searchTerm) {\n      this.setState({unitSuggestions: []});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/search/unit',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      params: {\n        kw: searchTerm\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({unitSuggestions: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  fetchNeededPriceListing() {\n    axios({\n      method: 'get',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({\n        newIngredientName: response.data.result,\n        ingredientSuggestions: []\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  selectIngredient(ingredientName) {\n    this.setState({newIngredientName: ingredientName, ingredientSuggestions: []});\n  }\n\n  selectUnits(units) {\n    this.setState({newIngredientUnits: units, unitSuggestions: []});\n  }\n\n  selectSource(e) {\n    this.setState({newIngredientSource: e.target.value});\n  }\n\n  setPrice(e) {\n    this.setState({newIngredientPrice: e.target.value});\n  }\n\n  setAmount(e) {\n    this.setState({newIngredientAmount: e.target.value});\n  }\n\n  addPriceListing(e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    let newListing = {\n      ingredientName: this.state.newIngredientName,\n      price: this.state.newIngredientPrice,\n      amount: this.state.newIngredientAmount,\n      source: this.state.newIngredientSource,\n      units: this.state.newIngredientUnits\n    };\n\n    ['ingredientName', 'source', 'units'].forEach(field => {\n      if (!newListing[field]) {\n        this.setState({error: `Missing field: ${field}`});\n        return;\n      }\n    });\n\n    if (newListing.price < 0) {\n      this.setState({error: 'Price cannot be negative'});\n      return;\n    }\n\n    if (newListing.amount && newListing.amount < 0) {\n      this.setState({error: 'Amount cannot be negative'});\n      return;\n    }\n\n    axios({\n      method: 'post',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: newListing\n    }).then(response => {\n      this.setState({\n        error: '',\n        message: `Price for ${newListing.ingredientName} successfully added!`\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  render() {\n    console.log(\"rendering price listing page\");\n    if (this.state.redirect) {\n      console.log(\"redirecting\");\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let ingredientOptions;\n    if (this.state.ingredientSuggestions) {\n      ingredientOptions = (\n        <ul>\n          {this.state.ingredientSuggestions.map(name => (\n            <li><button onClick={() => this.selectIngredient(name)}>{name}</button></li>\n          ))}\n        </ul>\n      );\n    } else {\n      this.ingredientOptions = <div></div>;\n    }\n\n    let unitOptions;\n    if (this.state.unitSuggestions) {\n      unitOptions = (\n        <ul>\n        {this.state.unitSuggestions.map(unit => (\n          <li><button onClick={() => this.selectUnits(unit)}>{unit}</button></li>\n        ))}\n        </ul>\n      );\n    } else {\n      unitOptions = <div></div>;\n    }\n\n    let form;\n    console.log(this.state);\n    if (this.state.newIngredientName && this.state.newIngredientUnits) {\n      form = (\n          <div>\n          <form onSubmit={this.addPriceListing}>\n            <p>{this.state.newIngredientName}</p>\n            <label htmlFor=\"source\">Source</label>\n            <input type=\"text\" id=\"source\" value={this.state.newIngredientSource} onChange={this.selectSource} />\n            <label htmlFor=\"price\">Price</label>\n            $<input type=\"number\" id=\"price\" min=\"0\" step=\"0.01\" value={this.state.newIngredientPrice} onChange={this.setPrice}/>\n            <label htmlFor=\"amount\">Amount</label>\n            <input type=\"number\" id=\"amount\" min=\"0\" step=\"0.01\" value={this.state.newIngredientAmount} onChange={this.setAmount}/>\n            <p>{this.state.newIngredientUnits}</p>\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        </div>\n      );\n    } else {\n      form = <div></div>;\n    }\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <label htmlFor=\"searchIngredient\">Search for an ingredient to add a price listing for:</label>\n        <input id=\"searchIngredient\" value={this.ingredientSearchTerm} onChange={this.searchIngredient}/>\n        {ingredientOptions}\n        <button onClick={this.fetchNeededPriceListing}>Choose for me</button>\n        <label htmlFor=\"searchUnit\">Select Units</label>\n        <input id=\"searchUnit\" value={this.unitSearchTerm} onChange={this.searchUnit} />\n        {unitOptions}\n        <br />\n        {this.state.newIngredientName ? <p>{this.state.newIngredientName}</p> : ''}\n        {this.state.newIngredientUnits ? <p>{this.state.newIngredientUnits}</p> : ''}\n        <hr />\n        {form}\n        {this.state.error}\n      </div>\n    );\n  }\n}\n\nclass PriceListingAdminPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      priceListings: [],\n      token: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.fetchListings();\n  }\n\n  fetchListings() {\n    axios({\n      method: 'get',\n      url: '/api/adminpricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      this.setState({priceListings: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        this.setState({error: 'Not an admin'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  updateListing(listing) {\n    axios({\n      method: 'post',\n      url: '/api/adminpricelistings/update',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated,\n        price: listing.price,\n        units: listing.units\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        this.setState({error: 'Not an admin'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  deleteListing(listing) {\n    axios({\n      method: 'post',   // we could use delete, but eh\n      url: '/api/adminpricelistings/delete',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        // TODO: forbidden response\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  updateListingLocally(listing, price, units) {\n    console.log(listing);\n    this.setState({priceListings: this.state.priceListings.map(l => {\n      if (l.ingredientName === listing.ingredientName &&\n        l.source === listing.source &&\n        l.timeCreated === listing.timeCreated) {\n        return {\n          ingredientName: l.ingredientName,\n          source: l.source,\n          timeCreated: l.timeCreated,\n          price: price,\n          units: units\n        };\n      }\n\n      return l;\n    })});\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(\"redirecting\");\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    // TODO: paginate\n    const listings = this.state.priceListings.map(listing =>\n      <tr key={`${listing.ingredientName}:${listing.source}:${listing.timeCreated}`}>\n        <td>{listing.ingredientName}</td>\n        <td>$<input type=\"number\" min=\"0\" step=\"0.01\" value={listing.price} onChange={e => this.updateListingLocally(listing, e.target.value, listing.units)} /></td>\n        <td><input type=\"text\" value={listing.units} onChange={e => this.updateListingLocally(listing, listing.price, e.target.value)} /></td>\n        <td>{listing.source}</td>\n        <td>{listing.timeCreated}</td>\n        <td><button onClick={() => this.updateListing(listing)}>Update</button></td>\n        <td><button onClick={() => this.deleteListing(listing)}>X</button></td>\n      </tr>\n    );\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <table>\n          <tr>\n            <th>Ingredient Name</th>\n            <th>Price</th>\n            <th>Units</th>\n            <th>Source</th>\n            <th>Time Created</th>\n            <th></th>\n            <th></th>\n          </tr>\n          {listings}\n        </table>\n        <p>{this.state.error}</p>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(App(), document.getElementById(\"root\"));\n"],"sourceRoot":""}