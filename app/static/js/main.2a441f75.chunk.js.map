{"version":3,"sources":["index.js"],"names":["AppHeader","props","toHome","bind","toListings","toMealPlanner","toAdminListings","logout","state","redirect","e","preventDefault","this","followLink","route","console","log","here","setState","to","pathname","token","class","href","onClick","React","Component","LoginPage","username","password","location","handleUsernameChange","handlePasswordChange","handleSubmit","event","target","value","axios","method","url","auth","then","response","data","catch","error","statusText","errorMessage","onSubmit","type","id","onChange","placeholder","required","autofocus","CreateAccountPage","password1","password2","handlePassword1Change","handlePassword2Change","pw2","smallError","smallErrorMessage","Meal","src","imageURL","alt","name","calories","cost","recipeURL","DayPlan","meals","map","meal","index","key","MealPlan","timeCreated","totalCost","totalCalories","recipes","length","dayPlan","HomePage","mealPlans","fetchMealPlans","headers","results","plan","download","deleteMealPlan","PlanMealPage","msg","budget","days","dailyCalories","title","minIngredients","maxIngredients","newIngredient","newAmount","newUnits","ingredientSearchResults","unitSearchResults","ingredientKeyword","unitKeyword","submitPlan","setTitle","setBudget","setCalories","setDays","updateIngredientSearch","updateUnitSearch","addMinIngredient","deleteMinIngredient","addMaxIngredient","deleteMaxIngredient","setIngredient","setUnits","setAmount","ingredientName","units","kw","ingFn","_","debounce","params","unitFn","some","push","amount","filter","i","message","mins","ing","maxs","htmlFor","min","step","max","PriceListingPage","ingredientSuggestions","unitSuggestions","ingredientSearchTerm","unitSearchTerm","newIngredientName","newIngredientSource","newIngredientPrice","newIngredientUnits","searchIngredient","searchUnit","fetchNeededPriceListing","setPrice","selectUnits","selectIngredient","selectSource","addPriceListing","searchTerm","searchIngredientFn","status","searchUnitFn","result","newIngredientAmount","newListing","price","source","forEach","field","ingredientOptions","unitOptions","form","unit","PriceListingAdminPage","priceListings","sourceKeyword","setIngredientKeyword","setSourceKeyword","fetchListings","fetchFn","ingredient","listing","l","listings","updateListingLocally","updateListing","deleteListing","ReactDOM","render","exact","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.2a441f75.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\nimport './index.css';\nimport axios from 'axios';\nimport _ from 'lodash';\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/login\" component={LoginPage} />\n          <Route exact path=\"/newaccount\" component={CreateAccountPage} />\n          <Route exact path=\"/newplan\" component={PlanMealPage} />\n          <Route exact path=\"/\" component={HomePage} />\n          <Route exact path=\"/listings\" component={PriceListingPage} />\n          <Route exact path=\"/adminlistings\" component={PriceListingAdminPage} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nclass AppHeader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toHome = this.toHome.bind(this);\n    this.toListings = this.toListings.bind(this);\n    this.toMealPlanner = this.toMealPlanner.bind(this);\n    this.toAdminListings = this.toAdminListings.bind(this);\n    this.logout = this.logout.bind(this);\n\n    this.state = {\n      redirect: ''\n    };\n  }\n\n  toHome(e) {\n    e.preventDefault();\n    this.followLink(\"/\");\n  }\n\n  toListings(e) {\n    e.preventDefault();\n    this.followLink(\"/listings\");\n  }\n\n  toMealPlanner(e) {\n    e.preventDefault();\n    this.followLink(\"/newplan\");\n  }\n\n  toAdminListings(e) {\n    e.preventDefault();\n    this.followLink(\"/adminlistings\")\n  }\n\n  logout(e) {\n    e.preventDefault();\n    this.followLink(\"/login\");\n  }\n\n  followLink(route) {\n    console.log(`redirecting to ${route}`)\n    if (route !== this.props.here) {\n      this.setState({redirect: route});\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.props.token}\n      }} />;\n    }\n\n    return (\n      <div>\n        <div class=\"pb-2 mt-4 mb-2 border-bottom\">\n          <h1>The MeelReel</h1>\n        </div>\n        <nav class=\"nav nav-tabs\">\n          <a class=\"nav-link\" href=\"/\" onClick={this.toHome}>Home</a>\n          <a class=\"nav-link\" href=\"/newplan\" onClick={this.toMealPlanner}>New Meal Plan</a>\n          <a class=\"nav-link\" href=\"/listings\" onClick={this.toListings}>Listings</a>\n          <a class=\"nav-link\" href=\"/adminlistings\" onClick={this.toAdminListings}>Admin listings</a>\n          <a class=\"nav-link\" href=\"/login\" onClick={this.logout}>Log out</a>\n        </nav>\n      </div>\n    )\n  }\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      redirect: '',\n      token: ''\n    };\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    }\n\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePasswordChange(event) {\n    this.setState({password: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axios({\n      method: 'get',\n      url: '/api/login',\n      auth: {\n        username: this.state.username,\n        password: this.state.password\n      }\n    }).then(response => {\n      console.log(\"logged in!\");\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      console.log(error.data);\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n\n      console.log(`redirecting to ${this.state.redirect}`);\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    return (\n      <div>\n        <br></br>\n        <div class=\"jumbotron title\">\n          <h1 class=\"display-4\">The MeelReel</h1>\n          <p class=\"lead\">Created By <a href=\"https://wiki.illinois.edu/wiki/display/CS411SU20/Big+Data+Energy\" target=\"_blank\">Big Data Energy</a></p>\n        </div>\n        <div class=\"jumbotron\">\n        <div class=\"container\">\n          <div class=\"row\">\n              <div class=\"col-md-6 cols\">\n                <h4>What is The MeelReel?</h4>\n                <p>\n                  The MeelReel is a web application that generates meal plans\n                  for a specified interval. Its primary feature is its budget\n                  filter; you can enter the maximum amount of money you want to\n                  spend on food for the specified interval and your desired\n                  caloric intake, and the application generates a meal plan\n                  in your budget.\n                </p>\n              </div>\n              <div class=\"col-md-6 cols\">\n              <h4>Sign In</h4>\n                  {errorMessage}\n                  <form class=\"container login_div\" onSubmit={this.handleSubmit}>\n                    <input type=\"text\" id=\"username\" class=\"form-control\" value={this.state.username} onChange={this.handleUsernameChange} placeholder=\"Username\" required autofocus=\"\"></input>\n                    <br></br>\n                    <input  type=\"password\" id=\"password\" class=\"form-control\" value={this.state.password} onChange={this.handlePasswordChange} placeholder=\"Password\" required></input>\n                    <br></br>\n                    <button class=\"btn btn-primary\" type=\"submit\">Go To Your MeelReel</button>\n                    <br></br>\n                    <br></br>\n                    <p>Don't have an account? <Link to=\"/newaccount\">Sign up</Link></p>\n                  </form>\n              </div>\n        </div>\n      </div>\n        </div>\n\n        <footer id=\"sticky-footer\" class=\"jumbotron py-4 text-white-50\">\n      <div class=\"container text-center\" id=\"footer-text\">\n        <small>Copyright &copy; 2020 <a href=\"https://wiki.illinois.edu/wiki/display/CS411SU20/Big+Data+Energy\" target=\"_blank\">Big Data Energy</a></small>\n      </div>\n    </footer>\n      </div>\n    );\n  }\n}\n\nclass CreateAccountPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password1: '',\n      password2: '',\n      redirect: ''\n    };\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePassword1Change = this.handlePassword1Change.bind(this);\n    this.handlePassword2Change = this.handlePassword2Change.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePassword1Change(event) {\n    this.setState({password1: event.target.value});\n  }\n\n  handlePassword2Change(event) {\n    let pw2 = event.target.value;\n    this.setState((state, props) => {\n      let smallError = state.password1 !== pw2 ? 'Passwords must match' : '';\n\n      return {\n        password2: pw2,\n        smallError: smallError\n      };\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (!this.state.username) {\n      this.setState({smallError: 'No username provided'});\n      return;\n    }\n\n    if (this.state.password1 !== this.state.password2) {\n      this.setState({smallError: 'Passwords must match'});\n      return;\n    }\n\n    if (!this.state.password1) {\n      this.setState({smallError: 'No password provided'});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/createaccount',\n      auth: {\n        username: this.state.username,\n        password: this.state.password1\n      }\n    }).then(response => {\n      console.log(\"redirecting to /\")\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    let smallErrorMessage = this.state.smallError ? <p>{this.state.smallError}</p> : <p></p>;\n    return (\n      <div>\n        <br></br>\n        <div class=\"jumbotron title\">\n          <h1 class=\"display-4\">The MeelReel</h1>\n          <p class=\"lead\">Created By <a href=\"https://wiki.illinois.edu/wiki/display/CS411SU20/Big+Data+Energy\" target=\"_blank\">Big Data Energy</a></p>\n        </div>\n        <div class=\"jumbotron\">\n        <h4>Sign Up</h4>\n        {errorMessage}\n          <form class=\"container login_div\" onSubmit={this.handleSubmit}>\n            <input type=\"text\" id=\"username\" class=\"form-control\" value={this.state.username} onChange={this.handleUsernameChange} placeholder=\"Username\" required autofocus=\"\"></input>\n            <br></br>\n            <input type=\"password\" id=\"password1\" class=\"form-control\" value={this.state.password1} onChange={this.handlePassword1Change} placeholder=\"Password\" required></input>\n            <br></br>\n            <input type=\"password\" id=\"password2\" class=\"form-control\" value={this.state.password2} onChange={this.handlePassword2Change} placeholder=\"Retype Password\" required></input>\n            <br></br>\n            <button type=\"submit\" class=\"btn btn-primary\">Create account</button>\n            <br></br>\n            <br></br>\n            <p>Already have an account? <Link to=\"/login\">Log in</Link></p>\n          </form>\n          {smallErrorMessage}\n        </div>\n        <footer id=\"sticky-footer\" class=\"jumbotron py-4 text-white-50\">\n      <div class=\"container text-center\" id=\"footer-text\">\n        <small>Copyright &copy; 2020 <a href=\"https://wiki.illinois.edu/wiki/display/CS411SU20/Big+Data+Energy\" target=\"_blank\">Big Data Energy</a></small>\n      </div>\n    </footer>\n      </div>\n    );\n  }\n}\n\nfunction Meal(props) {\n  return (\n    <div class=\"card\">\n      <img class=\"card-img-top\" src={props.imageURL} alt={props.name}/>\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">{props.name}</h5>\n        <div class=\"container\">\n          <p class=\"card-text row\">\n            <div class=\"col\">Calories: {props.calories}</div>\n            <div class=\"col\">Cost: ${props.cost}</div>\n          </p>\n        </div>\n        <a href={props.recipeURL} class=\"btn btn-link\">View Recipe</a>\n      </div>\n    </div>\n  );\n}\n\nfunction DayPlan(props) {\n  return (\n    <ul class=\"list-group\">\n      {props.meals.map((meal, index) => (\n        <li key={index} class=\"list-group-item\"><Meal name={meal.name} imageURL={meal.imageURL} recipeURL={meal.recipeURL} cost={meal.cost} calories={meal.calories}/></li>\n      ))}\n    </ul>\n  );\n}\n\nfunction MealPlan(props) {\n  return (\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">{props.name}</h5>\n        <div class=\"container\">\n          <p class=\"card-text row\">\n            <div>Created {props.timeCreated}</div>\n            <div>Cost: ${props.totalCost}</div>\n            <div>Total Calories: {props.totalCalories} ({props.totalCalories / props.recipes.length} calories per day)</div>\n          </p>\n        </div>\n        <hr />\n        <div class=\"d-flex flex-wrap\">\n          {props.recipes.map((dayPlan, index) => (\n            <div key={index}>\n              <DayPlan meals={dayPlan}/>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: '',\n      redirect: '',\n      error: '',\n      mealPlans: []\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.fetchMealPlans();\n  }\n\n  fetchMealPlans() {\n    axios({\n      method: 'get',\n      url: '/api/mealplan',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      this.setState({mealPlans: response.data.results});\n    }).catch(error => {\n      this.setState({error: error.data.error});\n    });\n  }\n\n  deleteMealPlan(id) {\n    axios({\n      method: 'delete',\n      url: '/api/mealplan',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        id: id\n      }\n    }).then(response => {\n      this.fetchMealPlans();\n    }).catch(error => {\n      this.setState({error: error.data.error});\n    })\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <h3>Your existing meal plans:</h3>\n        <ul class=\"list-group list-group-flush\">\n        {this.state.mealPlans.map(plan => (\n          <li key={plan.id} class=\"list-group-item\">\n            <MealPlan name={plan.name} timeCreated={plan.timeCreated} totalCost={plan.totalCost} totalCalories={plan.totalCalories} recipes={plan.recipes}/>\n            <br />\n            <a class=\"btn btn-link\" href={`/api/mealplan/${plan.id}.pdf`} download>Download</a>\n            <button class=\"btn btn-danger\" onClick={() => this.deleteMealPlan(plan.id)}>Delete</button>\n          </li>\n        ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass PlanMealPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing plan meal page\");\n    super(props);\n    this.state = {\n      token: '',\n      redirect: '',\n      error: '',\n      msg: '',\n      budget: 0,\n      days: 0,\n      dailyCalories: 0,\n      title: '',\n      minIngredients: [],\n      maxIngredients: [],\n      newIngredient: '',\n      newAmount: 0,\n      newUnits: '',\n      ingredientSearchResults: [],\n      unitSearchResults: [],\n      ingredientKeyword: '',\n      unitKeyword: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.submitPlan = this.submitPlan.bind(this);\n    this.setTitle = this.setTitle.bind(this);\n    this.setBudget = this.setBudget.bind(this);\n    this.setCalories = this.setCalories.bind(this);\n    this.setDays = this.setDays.bind(this);\n    this.updateIngredientSearch = this.updateIngredientSearch.bind(this);\n    this.updateUnitSearch = this.updateUnitSearch.bind(this);\n    this.addMinIngredient = this.addMinIngredient.bind(this);\n    this.deleteMinIngredient = this.deleteMinIngredient.bind(this);\n    this.addMaxIngredient = this.addMaxIngredient.bind(this);\n    this.deleteMaxIngredient = this.deleteMaxIngredient.bind(this);\n    this.setIngredient = this.setIngredient.bind(this);\n    this.setUnits = this.setUnits.bind(this);\n    this.setAmount = this.setAmount.bind(this);\n  }\n\n  setTitle(e) {\n    this.setState({title: e.target.value});\n  }\n\n  setBudget(e) {\n    this.setState({budget: e.target.value});\n  }\n\n  setCalories(e) {\n    this.setState({dailyCalories: e.target.value});\n  }\n\n  setDays(e) {\n    this.setState({days: e.target.value});\n  }\n\n  setIngredient(ingredientName) {\n    this.setState({newIngredient: ingredientName, ingredientSearchResults: []});\n  }\n\n  setUnits(units) {\n    this.setState({newUnits: units, unitSearchResults: []});\n  }\n\n  setAmount(e) {\n    this.setState({newAmount: e.target.value});\n  }\n\n  updateIngredientSearch(e) {\n    let kw = e.target.value;\n\n    this.setState({ingredientKeyword: kw}, () => {\n      if (!this.ingFn) {\n        this.ingFn = _.debounce(() => {\n          axios({\n            method: 'get',\n            url: '/api/search/ingredient',\n            params: {\n              kw: this.state.ingredientKeyword\n            },\n            headers: {\n              'Authorization': `Bearer ${this.state.token}`\n            }\n          }).then(response => {\n            this.setState({ingredientSearchResults: response.data.results});\n          });\n        }, 400);\n      }\n      this.ingFn();\n    });\n\n  }\n\n  updateUnitSearch(e) {\n    let kw = e.target.value;\n\n    this.setState({unitKeyword: kw}, () => {\n      if (!this.unitFn) {\n        this.unitFn = _.debounce(() => {\n          axios({\n            method: 'get',\n            url: '/api/search/unit',\n            params: {\n              kw: this.state.unitKeyword\n            },\n            headers: {\n              'Authorization': `Bearer ${this.state.token}`\n            }\n          }).then(response => {\n            this.setState({unitSearchResults: response.data.results});\n          });\n        }, 400);\n      }\n      this.unitFn();\n    });\n\n  }\n\n  addMinIngredient() {\n    if (!this.state.minIngredients.some(e => e.name === this.state.newIngredient)) {\n      this.setState((state, props) => {\n        state.minIngredients.push({\n          name: state.newIngredient,\n          amount: state.newAmount,\n          units: state.newUnits\n        });\n        return {minIngredients: state.minIngredients};\n      });\n    }\n  }\n\n  deleteMinIngredient(ingredientName) {\n    console.log(`deleting ${ingredientName} from min`);\n    console.log(this.state.minIngredients);\n    this.setState((state, props) => {\n      let newMin = state.minIngredients.filter(i => i.name !== ingredientName);\n      return {minIngredients: newMin};\n    });\n  }\n\n  addMaxIngredient() {\n    if (!this.state.minIngredients.some(e => e.name === this.state.newIngredient)) {\n      this.setState((state, props) => {\n        state.maxIngredients.push({\n          name: state.newIngredient,\n          amount: state.newAmount,\n          units: state.newUnits\n        });\n        return {maxIngredients: state.maxIngredients};\n      });\n    }\n  }\n\n  deleteMaxIngredient(ingredientName) {\n    console.log(`deleting ${ingredientName} from max`);\n    console.log(this.state.maxIngredients);\n    this.setState((state, props) => {\n      let newMax = state.maxIngredients.filter(i => i.name !== ingredientName);\n      return {maxIngredients: newMax};\n    });\n  }\n\n  submitPlan(e) {\n    e.preventDefault();\n    let message = {\n      budget: this.state.budget,\n      dailyCalories: this.state.dailyCalories,\n      days: this.state.days,\n      title: this.state.title,\n      minIngredients: this.state.minIngredients,\n      maxIngredients: this.state.maxIngredients\n    };\n    console.log(message);\n\n    axios({\n      method: 'post',\n      url: '/api/mealplan',\n      headers: {\n        'Authorization': `Basic ${this.state.token}`\n      },\n      data: message\n    }).then(response => {\n      this.setState({redirect: '/'});\n      //this.setState({msg: response.data.msg});\n    }).catch(error => {\n      this.setState({error: error.data.error});\n    });\n  }\n\n  render() {\n    console.log(\"rendering plan meal page\");\n    if (this.state.redirect) {\n      console.log(\"redirecting\")\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    let mins = this.state.minIngredients.map(ing => (\n      <li key={ing.name} class=\"list-group-item\">\n        <div key={ing.name} class=\"card\">\n          <div class=\"card-body\">\n            <p>{ing.name}: {ing.amount} {ing.units}</p>\n            <button class=\"btn btn-danger\" onClick={() => this.deleteMinIngredient(ing.name)}>X</button>\n          </div>\n        </div>\n      </li>\n    ));\n\n    let maxs = this.state.maxIngredients.map(ing => (\n      <li key={ing.name} class=\"list-group-item\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <p class=\"card-text\">{ing.name}: {ing.amount} {ing.units}</p>\n            <button class=\"btn btn-danger\" onClick={() => this.deleteMaxIngredient(ing.name)}>X</button>\n          </div>\n        </div>\n      </li>\n    ));\n\n    return (\n      <div>\n        <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <h3>Generate a new meal plan</h3>\n        <div>\n          <div class=\"row\">\n            <div class=\"form-group col-md-6\">\n              <label htmlFor=\"title\">Title (optional)</label>\n              <input id=\"title\" type=\"text\" class=\"form-control\" value={this.state.title} onChange={this.setTitle} />\n            </div>\n            <div class=\"form-group col-md-6\">\n              <label htmlFor=\"budget\">Budget</label>\n              $<input id=\"budget\" type=\"number\" min=\"0\" step=\"0.01\" class=\"form-control\" value={this.state.budget} onChange={this.setBudget} />\n            </div>\n            <div class=\"form-group col-md-6\">\n              <label htmlFor=\"calories\">Daily Calories</label>\n              <input id=\"calories\" type=\"number\" min=\"0\" class=\"form-control\" value={this.state.dailyCalories} onChange={this.setCalories} />\n            </div>\n            <div class=\"form-group col-md-6\">\n              <label htmlFor=\"days\">Days</label>\n              <input id=\"days\" type=\"number\" min=\"1\" max=\"31\" class=\"form-control\" value={this.state.days} onChange={this.setDays} />\n            </div>\n          </div>\n          <hr />\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <h4>Minimum Ingredients</h4>\n              <ul class=\"list-group\">\n                {mins}\n              </ul>\n            </div>\n            <div class=\"col-6\">\n              <h4>Maximum Ingredients</h4>\n              <ul class=\"list-group\">\n                {maxs}\n              </ul>\n            </div>\n          </div>\n          <hr />\n          <div class=\"form-group\">\n            <label htmlFor=\"search-ingr\">Ingredient</label>\n            <input id=\"search-ingr\" class=\"form-control\" type=\"text\" value={this.ingredientKeyword} onChange={this.updateIngredientSearch} />\n          </div>\n          <ul class=\"list-group list-group-horizontal d-flex flex-wrap\">\n            {this.state.ingredientSearchResults.map(name => (\n              <li key={name} class=\"list-group-item\"><button class=\"btn btn-secondary\" onClick={() => this.setIngredient(name)}>{name}</button></li>\n            ))}\n          </ul>\n          <div class=\"form-group\">\n            <label htmlFor=\"search-unit\">Unit</label>\n            <input id=\"search-unit\" class=\"form-control\" type=\"text\" value={this.unitKeyword} onChange={this.updateUnitSearch} />\n          </div>\n          <ul class=\"list-group list-group-horizontal d-flex flex-wrap\">\n            {this.state.unitSearchResults.map(name => (\n              <li key={name} class=\"list-group-item\"><button class=\"btn btn-secondary\" onClick={() => this.setUnits(name)}>{name}</button></li>\n            ))}\n          </ul>\n          <hr />\n          <div class=\"form-row\">\n            <div class=\"col-3\">{this.state.newIngredient}: </div>\n            <input id=\"amount\" class=\"form-control col-8\" type=\"number\" min=\"0\" step=\"0.01\" value={this.state.newAmount} onChange={this.setAmount} />\n            <div class=\"col-1\">{this.state.newUnits}</div>\n          </div>\n          <div class=\"form-group\">\n            <button class=\"btn btn-dark\" onClick={this.addMinIngredient}>Add as minimum</button>\n            <button class=\"btn btn-light\" onClick={this.addMaxIngredient}>Add as maximum</button>\n          </div>\n          <button class=\"btn btn-primary\" onClick={this.submitPlan}>Create Plan</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass PriceListingPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing price listings\");\n    super(props);\n    this.state = {\n      ingredientSuggestions: [],\n      unitSuggestions: [],\n      token: '',\n      ingredientSearchTerm: '',\n      unitSearchTerm: '',\n      newIngredientName: '',\n      newIngredientSource: '',\n      newIngredientPrice: 0,\n      newIngredientUnits: '',\n      redirect: '',\n      msg: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.searchIngredient = this.searchIngredient.bind(this);\n    this.searchUnit = this.searchUnit.bind(this);\n    this.fetchNeededPriceListing = this.fetchNeededPriceListing.bind(this);\n    this.setPrice = this.setPrice.bind(this);\n    this.setAmount = this.setAmount.bind(this);\n    this.selectUnits = this.selectUnits.bind(this);\n    this.selectIngredient = this.selectIngredient.bind(this);\n    this.selectSource = this.selectSource.bind(this);\n    this.addPriceListing = this.addPriceListing.bind(this);\n  }\n\n  searchIngredient(e) {\n    let searchTerm = e.target.value;\n\n    this.setState({ingredientSearchTerm: searchTerm}, () => {\n      if (!this.searchIngredientFn) {\n        this.searchIngredientFn = _.debounce(() => {\n          if (!this.state.ingredientSearchTerm) {\n            this.setState({ingredientSuggestions: []});\n            return;\n          }\n\n          axios({\n            method: 'get',\n            url: '/api/search/ingredient',\n            headers: {\n              'Authorization': `Bearer ${this.state.token}`\n            },\n            params: {\n              kw: this.state.ingredientSearchTerm\n            }\n          }).then(response => {\n            console.log(response.data);\n            this.setState({ingredientSuggestions: response.data.results});\n          }).catch(error => {\n            if (error.status === 401) {\n              this.setState({redirect: '/login'});\n            } else {\n              this.setState({error: error.data.error});\n            }\n          });\n        },   400  );\n      }\n\n      this.searchIngredientFn();\n    });\n\n  }\n\n  searchUnit(e) {\n    let searchTerm = e.target.value;\n\n    this.setState({unitSearchTerm: searchTerm}, () => {\n      if (!this.searchUnitFn) {\n        this.searchUnitFn = _.debounce(() => {\n          if (!this.state.unitSearchTerm) {\n            this.setState({unitSuggestions: []});\n            return;\n          }\n\n          axios({\n            method: 'get',\n            url: '/api/search/unit',\n            headers: {\n              'Authorization': `Bearer ${this.state.token}`\n            },\n            params: {\n              kw: this.state.unitSearchTerm\n            }\n          }).then(response => {\n            console.log(response.data);\n            this.setState({unitSuggestions: response.data.results});\n          }).catch(error => {\n            if (error.status === 401) {\n              this.setState({redirect: '/login'});\n            } else {\n              this.setState({error: error.data.error});\n            }\n          });\n        },   400  );\n      }\n\n      this.searchUnitFn();\n    });\n\n  }\n\n  fetchNeededPriceListing() {\n    axios({\n      method: 'get',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({\n        newIngredientName: response.data.result,\n        ingredientSuggestions: []\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  selectIngredient(ingredientName) {\n    this.setState({newIngredientName: ingredientName, ingredientSuggestions: []});\n  }\n\n  selectUnits(units) {\n    this.setState({newIngredientUnits: units, unitSuggestions: []});\n  }\n\n  selectSource(e) {\n    this.setState({newIngredientSource: e.target.value});\n  }\n\n  setPrice(e) {\n    this.setState({newIngredientPrice: e.target.value});\n  }\n\n  setAmount(e) {\n    this.setState({newIngredientAmount: e.target.value});\n  }\n\n  addPriceListing(e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    let newListing = {\n      ingredientName: this.state.newIngredientName,\n      price: this.state.newIngredientPrice,\n      amount: this.state.newIngredientAmount,\n      source: this.state.newIngredientSource,\n      units: this.state.newIngredientUnits\n    };\n\n    ['ingredientName', 'source', 'units'].forEach(field => {\n      if (!newListing[field]) {\n        this.setState({error: `Missing field: ${field}`});\n        return;\n      }\n    });\n\n    if (newListing.price < 0) {\n      this.setState({error: 'Price cannot be negative'});\n      return;\n    }\n\n    if (newListing.amount && newListing.amount < 0) {\n      this.setState({error: 'Amount cannot be negative'});\n      return;\n    }\n\n    axios({\n      method: 'post',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: newListing\n    }).then(response => {\n      this.setState({\n        error: '',\n        msg: `Price for ${newListing.ingredientName} successfully added!`\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let ingredientOptions;\n    if (this.state.ingredientSuggestions) {\n      ingredientOptions = (\n        <ul class=\"list-group list-group-horizontal d-flex flex-wrap\">\n          {this.state.ingredientSuggestions.map(name => (\n            <li key={name} class=\"list-group-item\"><button class=\"btn btn-secondary\" onClick={() => this.selectIngredient(name)}>{name}</button></li>\n          ))}\n        </ul>\n      );\n    } else {\n      this.ingredientOptions = '';\n    }\n\n    let unitOptions;\n    if (this.state.unitSuggestions) {\n      unitOptions = (\n        <ul class=\"list-group list-group-horizontal d-flex flex-wrap\">\n        {this.state.unitSuggestions.map(unit => (\n          <li key={unit} class=\"list-group-item\"><button class=\"btn btn-secondary\" onClick={() => this.selectUnits(unit)}>{unit}</button></li>\n        ))}\n        </ul>\n      );\n    } else {\n      unitOptions = '';\n    }\n\n    let form;\n    if (this.state.newIngredientName && this.state.newIngredientUnits) {\n      form = (\n        <div>\n          <form onSubmit={this.addPriceListing}>\n            <h5>{this.state.newIngredientName}</h5>\n            <div>\n              <div class=\"form-group\">\n                <label htmlFor=\"source\">Source</label>\n                <input type=\"text\" class=\"form-control\" id=\"source\" value={this.state.newIngredientSource} onChange={this.selectSource} />\n              </div>\n              <div class=\"form-group\">\n                <label htmlFor=\"price\">Price ($): </label>\n                <input type=\"number\" class=\"form-control\" id=\"price\" min=\"0\" step=\"0.01\" value={this.state.newIngredientPrice} onChange={this.setPrice}/>\n              </div>\n              <div class=\"form-group\">\n                <label htmlFor=\"amount\">Amount ({this.state.newIngredientUnits})</label>\n                <input type=\"number\" class=\"form-control\" id=\"amount\" min=\"0\" step=\"0.01\" value={this.state.newIngredientAmount} onChange={this.setAmount}/>\n            </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n          </form>\n        </div>\n      );\n    } else {\n      form = '';\n    }\n\n    return (\n      <div>\n        <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <div>\n          <div class=\"form-group\">\n            <label htmlFor=\"searchIngredient\">Search for an ingredient to add a price listing for:</label>\n            <input id=\"searchIngredient\" class=\"form-control\" value={this.ingredientSearchTerm} onChange={this.searchIngredient}/>\n            <button class=\"btn btn-info\" onClick={this.fetchNeededPriceListing}>Choose for me</button>\n          </div>\n          {ingredientOptions}\n          <div class=\"form-group\">\n            <label htmlFor=\"searchUnit\">Select Units</label>\n            <input id=\"searchUnit\" class=\"form-control\" value={this.unitSearchTerm} onChange={this.searchUnit} />\n          </div>\n          {unitOptions}\n        </div>\n        <br />\n        <div class=\"row\">\n          <p class=\"col\">New ingredient: {this.state.newIngredientName ? this.state.newIngredientName : 'None'}</p>\n          <p class=\"col\">New units: {this.state.newIngredientUnits ? this.state.newIngredientUnits : 'None'}</p>\n        </div>\n        <hr />\n        {form}\n        {this.state.error}\n        {this.state.msg}\n      </div>\n    );\n  }\n}\n\nclass PriceListingAdminPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      priceListings: [],\n      token: '',\n      redirect: '',\n      ingredientKeyword: '',\n      sourceKeyword: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.setIngredientKeyword = this.setIngredientKeyword.bind(this);\n    this.setSourceKeyword = this.setSourceKeyword.bind(this);\n\n    this.fetchListings();\n  }\n\n  fetchListings() {\n    if (!this.fetchFn) {\n      this.fetchFn = _.debounce(() => {\n        axios({\n          method: 'get',\n          url: '/api/adminpricelistings',\n          headers: {\n            'Authorization': `Bearer ${this.state.token}`\n          },\n          params: {\n            ingredient: this.state.ingredientKeyword,\n            source: this.state.sourceKeyword\n          }\n        }).then(response => {\n          this.setState({priceListings: response.data.results});\n        }).catch(error => {\n          if (error.status === 401) {\n            this.setState({redirect: '/login'});\n          } else if (error.status === 403) {\n            this.setState({error: 'Not an admin'});\n          } else {\n            this.setState({error: error.data.error});\n          }\n        });\n      }, 400);\n    }\n\n    this.fetchFn();\n  }\n\n  updateListing(listing) {\n    axios({\n      method: 'post',\n      url: '/api/adminpricelistings/update',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated,\n        price: listing.price,\n        units: listing.units\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        this.setState({error: 'Not an admin'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  deleteListing(listing) {\n    axios({\n      method: 'post',   // we could use delete, but eh\n      url: '/api/adminpricelistings/delete',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        // TODO: forbidden response\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  updateListingLocally(listing, price, units) {\n    console.log(listing);\n    this.setState({priceListings: this.state.priceListings.map(l => {\n      if (l.ingredientName === listing.ingredientName &&\n        l.source === listing.source &&\n        l.timeCreated === listing.timeCreated) {\n        return {\n          ingredientName: l.ingredientName,\n          source: l.source,\n          timeCreated: l.timeCreated,\n          price: price,\n          units: units\n        };\n      }\n\n      return l;\n    })});\n  }\n\n  setIngredientKeyword(e) {\n    this.setState({ingredientKeyword: e.target.value}, this.fetchListings);\n  }\n\n  setSourceKeyword(e) {\n    this.setState({sourceKeyword: e.target.value}, this.fetchListings);\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(\"redirecting\");\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    // TODO: paginate\n    const listings = this.state.priceListings.map(listing =>\n      <tr key={`${listing.ingredientName}:${listing.source}:${listing.timeCreated}`}>\n        <td>{listing.ingredientName}</td>\n        <td>$<input type=\"number\" min=\"0\" step=\"0.01\" value={listing.price} onChange={e => this.updateListingLocally(listing, e.target.value, listing.units)} /></td>\n        <td><input type=\"text\" value={listing.units} onChange={e => this.updateListingLocally(listing, listing.price, e.target.value)} /></td>\n        <td>{listing.source}</td>\n        <td>{listing.timeCreated}</td>\n        <td><button class=\"btn btn-success\" onClick={() => this.updateListing(listing)}>Update</button></td>\n        <td><button class=\"btn btn-danger\" onClick={() => this.deleteListing(listing)}>X</button></td>\n      </tr>\n    );\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} here={this.props.location.pathname} />\n        <table class=\"table table-striped table-hover\">\n          <thead>\n            <tr>\n              <th>Ingredient Name</th>\n              <th>Price</th>\n              <th>Units</th>\n              <th>Source</th>\n              <th>Time Created</th>\n              <th><input type=\"text\" class=\"form-control\" placeholder=\"Filter ingredients\" value={this.state.ingredientKeyword} onChange={this.setIngredientKeyword}/></th>\n              <th><input type=\"text\" class=\"form-control\" placeholder=\"Filter sources\" value={this.state.sourceKeyword} onChange={this.setSourceKeyword}/></th>\n            </tr>\n          </thead>\n          <tbody>\n          {listings}\n          </tbody>\n        </table>\n        <p>{this.state.error}</p>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(App(), document.getElementById(\"root\"));\n"],"sourceRoot":""}