{"version":3,"sources":["index.js"],"names":["AppHeader","props","toListings","bind","toMealPlanner","toAdminListings","state","redirect","e","preventDefault","this","followLink","route","console","log","setState","to","pathname","token","href","onClick","React","Component","LoginPage","username","password","location","handleUsernameChange","handlePasswordChange","handleSubmit","event","target","value","axios","method","url","auth","then","response","data","catch","error","statusText","errorMessage","onSubmit","htmlFor","type","id","onChange","CreateAccountPage","password1","password2","handlePassword1Change","handlePassword2Change","smallError","smallErrorMessage","PlanMealPage","PriceListingPage","ingredientSuggestions","unitSuggestions","ingredientSearchTerm","unitSearchTerm","newIngredientName","newIngredientSource","newIngredientPrice","newIngredientUnits","searchIngredient","searchUnit","fetchNeededPriceListing","setPrice","setAmount","selectUnits","selectIngredient","selectSource","addPriceListing","searchTerm","headers","params","kw","results","status","result","ingredientName","units","newIngredientAmount","newListing","price","amount","source","forEach","field","message","ingredientOptions","unitOptions","form","map","name","unit","min","step","PriceListingAdminPage","priceListings","fetchListings","listing","timeCreated","l","listings","key","updateListingLocally","updateListing","deleteListing","ReactDOM","render","exact","path","component","document","getElementById"],"mappings":"uQA4BMA,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,gBACrB,EAAKE,gBAAkB,EAAKA,gBAAgBF,KAArB,gBAEvB,EAAKG,MAAQ,CACXC,SAAU,IARK,E,uDAYRC,GACTA,EAAEC,iBACFC,KAAKC,WAAW,e,oCAGJH,GACZA,EAAEC,iBACFC,KAAKC,WAAW,O,sCAGFH,GACdA,EAAEC,iBACFC,KAAKC,WAAW,oB,iCAGPC,GACTC,QAAQC,IAAR,yBAA8BF,IAC9BF,KAAKK,SAAS,CAACR,SAAUK,M,+BAIzB,OAAIF,KAAKJ,MAAMC,SACN,kBAAC,IAAD,CAAUS,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAACY,MAAOR,KAAKT,MAAMiB,UAK5B,6BACE,4BACE,4BAAI,uBAAGC,KAAK,IAAIC,QAASV,KAAKN,eAA1B,iBACJ,4BAAI,uBAAGe,KAAK,YAAYC,QAASV,KAAKR,YAAlC,aACJ,4BAAI,uBAAGiB,KAAK,iBAAiBC,QAASV,KAAKL,iBAAvC,yB,GA9CUgB,IAAMC,WAqDxBC,E,kDACJ,WAAYtB,GAAQ,IAAD,8BACjB,cAAMA,IACDK,MAAQ,CACXkB,SAAU,GACVC,SAAU,GACVlB,SAAU,GACVW,MAAO,IAEL,EAAKjB,MAAMyB,SAASpB,OAAS,EAAKL,MAAMyB,SAASpB,MAAMY,QACzD,EAAKZ,MAAMY,MAAQ,EAAKjB,MAAMyB,SAASpB,MAAMY,OAG/C,EAAKS,qBAAuB,EAAKA,qBAAqBxB,KAA1B,gBAC5B,EAAKyB,qBAAuB,EAAKA,qBAAqBzB,KAA1B,gBAC5B,EAAK0B,aAAe,EAAKA,aAAa1B,KAAlB,gBAdH,E,iEAiBE2B,GACnBpB,KAAKK,SAAS,CAACS,SAAUM,EAAMC,OAAOC,U,2CAGnBF,GACnBpB,KAAKK,SAAS,CAACU,SAAUK,EAAMC,OAAOC,U,mCAG3BF,GAAQ,IAAD,OAClBA,EAAMrB,iBACNwB,IAAM,CACJC,OAAQ,MACRC,IAAK,aACLC,KAAM,CACJZ,SAAUd,KAAKJ,MAAMkB,SACrBC,SAAUf,KAAKJ,MAAMmB,YAEtBY,MAAK,SAAAC,GACNzB,QAAQC,IAAI,cACZ,EAAKC,SAAS,CAACR,SAAU,IAAKW,MAAOoB,EAASC,KAAKrB,WAClDsB,OAAM,SAAAC,GACP,EAAK1B,SAAS,CAAC0B,MAAOA,EAAMC,kB,+BAK9B,GAAIhC,KAAKJ,MAAMC,SAEb,OADAM,QAAQC,IAAR,yBAA8BJ,KAAKJ,MAAMC,WAClC,kBAAC,IAAD,CAAUS,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAAEY,MAAOR,KAAKJ,MAAMY,UAI/B,IAAIyB,EAAejC,KAAKJ,MAAMmC,MAAQ,2BAAI/B,KAAKJ,MAAMmC,OAAa,4BAClE,OACE,6BACA,qDAA0B,kBAAC,IAAD,CAAMzB,GAAG,eAAT,YACzB2B,EACC,0BAAMC,SAAUlC,KAAKmB,cACnB,2BAAOgB,QAAQ,YAAf,YACA,2BAAOC,KAAK,OAAOC,GAAG,WAAWf,MAAOtB,KAAKJ,MAAMkB,SAAUwB,SAAUtC,KAAKiB,uBAC5E,2BAAOkB,QAAQ,YAAf,YACA,2BAAOC,KAAK,WAAWC,GAAG,WAAWf,MAAOtB,KAAKJ,MAAMmB,SAAUuB,SAAUtC,KAAKkB,uBAChF,2BAAOkB,KAAK,SAASd,MAAM,iB,GA9DbX,IAAMC,WAqExB2B,E,kDACJ,WAAYhD,GAAQ,IAAD,8BACjB,cAAMA,IACDK,MAAQ,CACXkB,SAAU,GACV0B,UAAW,GACXC,UAAW,GACX5C,SAAU,IAEZ,EAAKoB,qBAAuB,EAAKA,qBAAqBxB,KAA1B,gBAC5B,EAAKiD,sBAAwB,EAAKA,sBAAsBjD,KAA3B,gBAC7B,EAAKkD,sBAAwB,EAAKA,sBAAsBlD,KAA3B,gBAC7B,EAAK0B,aAAe,EAAKA,aAAa1B,KAAlB,gBAXH,E,iEAcE2B,GACnBpB,KAAKK,SAAS,CAACS,SAAUM,EAAMC,OAAOC,U,4CAGlBF,GACpBpB,KAAKK,SAAS,CAACmC,UAAWpB,EAAMC,OAAOC,U,4CAGnBF,GACpBpB,KAAKK,SAAS,CAACoC,UAAWrB,EAAMC,OAAOC,QACnCtB,KAAKJ,MAAM4C,YAAcxC,KAAKJ,MAAM6C,UACtCzC,KAAKK,SAAS,CAACuC,WAAY,yBAE3B5C,KAAKK,SAAS,CAACuC,WAAY,O,mCAIlBxB,GAAQ,IAAD,OAClBA,EAAMrB,iBAEDC,KAAKJ,MAAMkB,SAKZd,KAAKJ,MAAM4C,YAAcxC,KAAKJ,MAAM6C,UAKnCzC,KAAKJ,MAAM4C,UAKhBjB,IAAM,CACJC,OAAQ,MACRC,IAAK,qBACLC,KAAM,CACJZ,SAAUd,KAAKJ,MAAMkB,SACrBC,SAAUf,KAAKJ,MAAM4C,aAEtBb,MAAK,SAAAC,GACNzB,QAAQC,IAAI,oBACZ,EAAKC,SAAS,CAACR,SAAU,IAAKW,MAAOoB,EAASC,KAAKrB,WAClDsB,OAAM,SAAAC,GACP,EAAK1B,SAAS,CAAC0B,MAAOA,EAAMC,gBAf5BhC,KAAKK,SAAS,CAACuC,WAAY,yBAL3B5C,KAAKK,SAAS,CAACuC,WAAY,yBAL3B5C,KAAKK,SAAS,CAACuC,WAAY,2B,+BA8B7B,GAAI5C,KAAKJ,MAAMC,SACb,OAAO,kBAAC,IAAD,CAAUS,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAACY,MAAOR,KAAKJ,MAAMY,UAI9B,IAAIyB,EAAejC,KAAKJ,MAAMmC,MAAQ,2BAAI/B,KAAKJ,MAAMmC,OAAa,4BAC9Dc,EAAoB7C,KAAKJ,MAAMgD,WAAa,2BAAI5C,KAAKJ,MAAMgD,YAAkB,4BACjF,OACE,6BACA,uDAA4B,kBAAC,IAAD,CAAMtC,GAAG,UAAT,WAC3B2B,EACC,0BAAMC,SAAUlC,KAAKmB,cACnB,2BAAOgB,QAAQ,YAAf,YACA,2BAAOC,KAAK,OAAOC,GAAG,WAAWf,MAAOtB,KAAKJ,MAAMkB,SAAUwB,SAAUtC,KAAKiB,uBAC5E,2BAAOkB,QAAQ,aAAf,YACA,2BAAOC,KAAK,WAAWC,GAAG,YAAYf,MAAOtB,KAAKJ,MAAM4C,UAAWF,SAAUtC,KAAK0C,wBAClF,2BAAOP,QAAQ,aAAf,mBACA,2BAAOC,KAAK,WAAWC,GAAG,YAAYf,MAAOtB,KAAKJ,MAAM6C,UAAWH,SAAUtC,KAAK2C,wBAClF,2BAAOP,KAAK,SAASd,MAAM,oBAE9BuB,O,GAxFyBlC,IAAMC,WA8FhCkC,E,kDACJ,WAAYvD,GAAQ,IAAD,6BACjBY,QAAQC,IAAI,gCACZ,cAAMb,IACDK,MAAQ,CACXY,MAAO,GACPX,SAAU,IAGR,EAAKN,MAAMyB,SAASpB,OAAS,EAAKL,MAAMyB,SAASpB,MAAMY,MACzD,EAAKZ,MAAMY,MAAQ,EAAKjB,MAAMyB,SAASpB,MAAMY,MAE7C,EAAKZ,MAAMC,SAAW,SAXP,E,qDAiBjB,OADAM,QAAQC,IAAI,4BACRJ,KAAKJ,MAAMC,SACN,kBAAC,IAAD,CAAUS,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAAEY,MAAOR,KAAKJ,MAAMY,UAK7B,6BACE,kBAAClB,EAAD,CAAWkB,MAAOR,KAAKJ,MAAMY,QAC7B,uD,GA5BmBG,IAAMC,WAkC3BmC,E,kDACJ,WAAYxD,GAAQ,IAAD,6BACjBY,QAAQC,IAAI,gCACZ,cAAMb,IACDK,MAAQ,CACXoD,sBAAuB,GACvBC,gBAAiB,GACjBzC,MAAO,GACP0C,qBAAsB,GACtBC,eAAgB,GAChBC,kBAAmB,GACnBC,oBAAqB,GACrBC,mBAAoB,EACpBC,mBAAoB,GACpB1D,SAAU,IAGR,EAAKN,MAAMyB,SAASpB,OAAS,EAAKL,MAAMyB,SAASpB,MAAMY,MACzD,EAAKZ,MAAMY,MAAQ,EAAKjB,MAAMyB,SAASpB,MAAMY,MAE7C,EAAKZ,MAAMC,SAAW,SAGxB,EAAK2D,iBAAmB,EAAKA,iBAAiB/D,KAAtB,gBACxB,EAAKgE,WAAa,EAAKA,WAAWhE,KAAhB,gBAClB,EAAKiE,wBAA0B,EAAKA,wBAAwBjE,KAA7B,gBAC/B,EAAKkE,SAAW,EAAKA,SAASlE,KAAd,gBAChB,EAAKmE,UAAY,EAAKA,UAAUnE,KAAf,gBACjB,EAAKoE,YAAc,EAAKA,YAAYpE,KAAjB,gBACnB,EAAKqE,iBAAmB,EAAKA,iBAAiBrE,KAAtB,gBACxB,EAAKsE,aAAe,EAAKA,aAAatE,KAAlB,gBACpB,EAAKuE,gBAAkB,EAAKA,gBAAgBvE,KAArB,gBA9BN,E,6DAiCFK,GAAI,IAAD,OACdmE,EAAanE,EAAEuB,OAAOC,MAC1BtB,KAAKK,SAAS,CAAC6C,qBAAsBe,IAChCA,EAKL1C,IAAM,CACJC,OAAQ,MACRC,IAAK,yBACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,QAExC2D,OAAQ,CACNC,GAAIH,KAELtC,MAAK,SAAAC,GACNzB,QAAQC,IAAIwB,EAASC,MACrB,EAAKxB,SAAS,CAAC2C,sBAAuBpB,EAASC,KAAKwC,aACnDvC,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WAEzB,EAAKQ,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,WApBnC/B,KAAKK,SAAS,CAAC2C,sBAAuB,O,iCAyB/BlD,GAAI,IAAD,OACRmE,EAAanE,EAAEuB,OAAOC,MAC1BtB,KAAKK,SAAS,CAAC8C,eAAgBc,IAC1BA,EAKL1C,IAAM,CACJC,OAAQ,MACRC,IAAK,mBACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,QAExC2D,OAAQ,CACNC,GAAIH,KAELtC,MAAK,SAAAC,GACNzB,QAAQC,IAAIwB,EAASC,MACrB,EAAKxB,SAAS,CAAC4C,gBAAiBrB,EAASC,KAAKwC,aAC7CvC,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WAEzB,EAAKQ,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,WApBnC/B,KAAKK,SAAS,CAAC4C,gBAAiB,O,gDAyBT,IAAD,OACxB1B,IAAM,CACJC,OAAQ,MACRC,IAAK,qBACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,UAEvCmB,MAAK,SAAAC,GACNzB,QAAQC,IAAIwB,EAASC,MACrB,EAAKxB,SAAS,CACZ+C,kBAAmBxB,EAASC,KAAK0C,OACjCvB,sBAAuB,QAExBlB,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WAEzB,EAAKQ,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,a,uCAKtByC,GACfxE,KAAKK,SAAS,CAAC+C,kBAAmBoB,EAAgBxB,sBAAuB,O,kCAG/DyB,GACVzE,KAAKK,SAAS,CAACkD,mBAAoBkB,EAAOxB,gBAAiB,O,mCAGhDnD,GACXE,KAAKK,SAAS,CAACgD,oBAAqBvD,EAAEuB,OAAOC,U,+BAGtCxB,GACPE,KAAKK,SAAS,CAACiD,mBAAoBxD,EAAEuB,OAAOC,U,gCAGpCxB,GACRE,KAAKK,SAAS,CAACqE,oBAAqB5E,EAAEuB,OAAOC,U,sCAG/BxB,GAAI,IAAD,OACbA,GACFA,EAAEC,iBAGJ,IAAI4E,EAAa,CACfH,eAAgBxE,KAAKJ,MAAMwD,kBAC3BwB,MAAO5E,KAAKJ,MAAM0D,mBAClBuB,OAAQ7E,KAAKJ,MAAM8E,oBACnBI,OAAQ9E,KAAKJ,MAAMyD,oBACnBoB,MAAOzE,KAAKJ,MAAM2D,oBAGpB,CAAC,iBAAkB,SAAU,SAASwB,SAAQ,SAAAC,GACvCL,EAAWK,IACd,EAAK3E,SAAS,CAAC0B,MAAM,kBAAD,OAAoBiD,QAKxCL,EAAWC,MAAQ,EACrB5E,KAAKK,SAAS,CAAC0B,MAAO,6BAIpB4C,EAAWE,QAAUF,EAAWE,OAAS,EAC3C7E,KAAKK,SAAS,CAAC0B,MAAO,8BAIxBR,IAAM,CACJC,OAAQ,OACRC,IAAK,qBACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,QAExCqB,KAAM8C,IACLhD,MAAK,SAAAC,GACN,EAAKvB,SAAS,CACZ0B,MAAO,GACPkD,QAAQ,aAAD,OAAeN,EAAWH,eAA1B,6BAER1C,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WAEzB,EAAKQ,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,a,+BAK7B,IAUJmD,EAaAC,EAaAC,EApCG,OAEP,OADAjF,QAAQC,IAAI,gCACRJ,KAAKJ,MAAMC,UACbM,QAAQC,IAAI,eACL,kBAAC,IAAD,CAAUE,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAACY,MAAOR,KAAKJ,MAAMY,YAK1BR,KAAKJ,MAAMoD,sBACbkC,EACE,4BACGlF,KAAKJ,MAAMoD,sBAAsBqC,KAAI,SAAAC,GAAI,OACxC,4BAAI,4BAAQ5E,QAAS,kBAAM,EAAKoD,iBAAiBwB,KAAQA,QAK/DtF,KAAKkF,kBAAoB,8BAKzBC,EADEnF,KAAKJ,MAAMqD,gBAEX,4BACCjD,KAAKJ,MAAMqD,gBAAgBoC,KAAI,SAAAE,GAAI,OAClC,4BAAI,4BAAQ7E,QAAS,kBAAM,EAAKmD,YAAY0B,KAAQA,QAK1C,8BAIhBpF,QAAQC,IAAIJ,KAAKJ,OAEfwF,EADEpF,KAAKJ,MAAMwD,mBAAqBpD,KAAKJ,MAAM2D,mBAEzC,6BACA,0BAAMrB,SAAUlC,KAAKgE,iBACnB,2BAAIhE,KAAKJ,MAAMwD,mBACf,2BAAOjB,QAAQ,UAAf,UACA,2BAAOC,KAAK,OAAOC,GAAG,SAASf,MAAOtB,KAAKJ,MAAMyD,oBAAqBf,SAAUtC,KAAK+D,eACrF,2BAAO5B,QAAQ,SAAf,SAJF,IAKG,2BAAOC,KAAK,SAASC,GAAG,QAAQmD,IAAI,IAAIC,KAAK,OAAOnE,MAAOtB,KAAKJ,MAAM0D,mBAAoBhB,SAAUtC,KAAK2D,WAC1G,2BAAOxB,QAAQ,UAAf,UACA,2BAAOC,KAAK,SAASC,GAAG,SAASmD,IAAI,IAAIlE,MAAOtB,KAAKJ,MAAM8E,oBAAqBpC,SAAUtC,KAAK4D,YAC/F,2BAAI5D,KAAKJ,MAAM2D,oBACf,2BAAOnB,KAAK,SAASd,MAAM,aAK1B,8BAIP,6BACA,kBAAChC,EAAD,CAAWkB,MAAOR,KAAKJ,MAAMY,QAC3B,2BAAO2B,QAAQ,oBAAf,wDACA,2BAAOE,GAAG,mBAAmBf,MAAOtB,KAAKkD,qBAAsBZ,SAAUtC,KAAKwD,mBAC7E0B,EACD,4BAAQxE,QAASV,KAAK0D,yBAAtB,iBACA,2BAAOvB,QAAQ,cAAf,gBACA,2BAAOE,GAAG,aAAaf,MAAOtB,KAAKmD,eAAgBb,SAAUtC,KAAKyD,aACjE0B,EACD,6BACCC,EACApF,KAAKJ,MAAMmC,Y,GA/PWpB,IAAMC,WAqQ/B8E,E,kDACJ,WAAYnG,GAAQ,IAAD,8BACjB,cAAMA,IACDK,MAAQ,CACX+F,cAAe,GACfnF,MAAO,GACPX,SAAU,IAGR,EAAKN,MAAMyB,SAASpB,OAAS,EAAKL,MAAMyB,SAASpB,MAAMY,MACzD,EAAKZ,MAAMY,MAAQ,EAAKjB,MAAMyB,SAASpB,MAAMY,MAE7C,EAAKZ,MAAMC,SAAW,SAGxB,EAAK+F,gBAdY,E,4DAiBF,IAAD,OACdrE,IAAM,CACJC,OAAQ,MACRC,IAAK,0BACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,UAEvCmB,MAAK,SAAAC,GACN,EAAKvB,SAAS,CAACsF,cAAe/D,EAASC,KAAKwC,aAC3CvC,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WACC,MAAjBkC,EAAMuC,OACf,EAAKjE,SAAS,CAAC0B,MAAO,iBAEtB,EAAK1B,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,a,oCAKzB8D,GAAU,IAAD,OACrBtE,IAAM,CACJC,OAAQ,OACRC,IAAK,iCACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,QAExCqB,KAAM,CACJ2C,eAAgBqB,EAAQrB,eACxBM,OAAQe,EAAQf,OAChBgB,YAAaD,EAAQC,YACrBlB,MAAOiB,EAAQjB,MACfH,MAAOoB,EAAQpB,SAEhB9C,MAAK,SAAAC,GACN,EAAKgE,mBAEJ9D,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WACC,MAAjBkC,EAAMuC,OACf,EAAKjE,SAAS,CAAC0B,MAAO,iBAEtB,EAAK1B,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,a,oCAKzB8D,GAAU,IAAD,OACrBtE,IAAM,CACJC,OAAQ,OACRC,IAAK,iCACLyC,QAAS,CACP,cAAgB,UAAhB,OAA2BlE,KAAKJ,MAAMY,QAExCqB,KAAM,CACJ2C,eAAgBqB,EAAQrB,eACxBM,OAAQe,EAAQf,OAChBgB,YAAaD,EAAQC,eAEtBnE,MAAK,SAAAC,GACN,EAAKgE,mBAEJ9D,OAAM,SAAAC,GACc,MAAjBA,EAAMuC,OACR,EAAKjE,SAAS,CAACR,SAAU,WACC,MAAjBkC,EAAMuC,QAGf,EAAKjE,SAAS,CAAC0B,MAAOA,EAAMF,KAAKE,a,2CAKlB8D,EAASjB,EAAOH,GACnCtE,QAAQC,IAAIyF,GACZ7F,KAAKK,SAAS,CAACsF,cAAe3F,KAAKJ,MAAM+F,cAAcN,KAAI,SAAAU,GACzD,OAAIA,EAAEvB,iBAAmBqB,EAAQrB,gBAC/BuB,EAAEjB,SAAWe,EAAQf,QACrBiB,EAAED,cAAgBD,EAAQC,YACnB,CACLtB,eAAgBuB,EAAEvB,eAClBM,OAAQiB,EAAEjB,OACVgB,YAAaC,EAAED,YACflB,MAAOA,EACPH,MAAOA,GAIJsB,S,+BAID,IAAD,OACP,GAAI/F,KAAKJ,MAAMC,SAEb,OADAM,QAAQC,IAAI,eACL,kBAAC,IAAD,CAAUE,GAAI,CACnBC,SAAUP,KAAKJ,MAAMC,SACrBD,MAAO,CAACY,MAAOR,KAAKJ,MAAMY,UAK9B,IAAMwF,EAAWhG,KAAKJ,MAAM+F,cAAcN,KAAI,SAAAQ,GAAO,OACnD,wBAAII,IAAG,UAAKJ,EAAQrB,eAAb,YAA+BqB,EAAQf,OAAvC,YAAiDe,EAAQC,cAC9D,4BAAKD,EAAQrB,gBACb,gCAAK,2BAAOpC,KAAK,SAASoD,IAAI,IAAIC,KAAK,OAAOnE,MAAOuE,EAAQjB,MAAOtC,SAAU,SAAAxC,GAAC,OAAI,EAAKoG,qBAAqBL,EAAS/F,EAAEuB,OAAOC,MAAOuE,EAAQpB,WAC9I,4BAAI,2BAAOrC,KAAK,OAAOd,MAAOuE,EAAQpB,MAAOnC,SAAU,SAAAxC,GAAC,OAAI,EAAKoG,qBAAqBL,EAASA,EAAQjB,MAAO9E,EAAEuB,OAAOC,WACvH,4BAAKuE,EAAQf,QACb,4BAAKe,EAAQC,aACb,4BAAI,4BAAQpF,QAAS,kBAAM,EAAKyF,cAAcN,KAA1C,WACJ,4BAAI,4BAAQnF,QAAS,kBAAM,EAAK0F,cAAcP,KAA1C,UAIR,OACE,6BACA,kBAACvG,EAAD,CAAWkB,MAAOR,KAAKJ,MAAMY,QAC3B,+BACE,4BACE,+CACA,qCACA,qCACA,sCACA,4CACA,6BACA,8BAEDwF,GAEH,2BAAIhG,KAAKJ,MAAMmC,Y,GApJapB,IAAMC,WA0J1CyF,IAASC,OAvqBL,kBAAC,IAAD,KACE,6BACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAW5F,IACtC,kBAAC,IAAD,CAAO0F,OAAK,EAACC,KAAK,cAAcC,UAAWlE,IAC3C,kBAAC,IAAD,CAAOgE,OAAK,EAACC,KAAK,IAAIC,UAAW3D,IACjC,kBAAC,IAAD,CAAOyD,OAAK,EAACC,KAAK,YAAYC,UAAW1D,IACzC,kBAAC,IAAD,CAAOwD,OAAK,EAACC,KAAK,iBAAiBC,UAAWf,OAgqBjCgB,SAASC,eAAe,U","file":"static/js/main.438f611b.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\nimport './index.css';\nimport axios from 'axios';\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/login\" component={LoginPage} />\n          <Route exact path=\"/newaccount\" component={CreateAccountPage} />\n          <Route exact path=\"/\" component={PlanMealPage} />\n          <Route exact path=\"/listings\" component={PriceListingPage} />\n          <Route exact path=\"/adminlistings\" component={PriceListingAdminPage} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nclass AppHeader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toListings = this.toListings.bind(this);\n    this.toMealPlanner = this.toMealPlanner.bind(this);\n    this.toAdminListings = this.toAdminListings.bind(this);\n\n    this.state = {\n      redirect: ''\n    };\n  }\n\n  toListings(e) {\n    e.preventDefault();\n    this.followLink(\"/listings\");\n  }\n\n  toMealPlanner(e) {\n    e.preventDefault();\n    this.followLink(\"/\");\n  }\n\n  toAdminListings(e) {\n    e.preventDefault();\n    this.followLink(\"/adminlistings\")\n  }\n\n  followLink(route) {\n    console.log(`redirecting to ${route}`)\n    this.setState({redirect: route});\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.props.token}\n      }} />;\n    }\n\n    return (\n      <nav>\n        <ul>\n          <li><a href=\"/\" onClick={this.toMealPlanner}>Meal Planner</a></li>\n          <li><a href=\"/listings\" onClick={this.toListings}>Listings</a></li>\n          <li><a href=\"/adminlistings\" onClick={this.toAdminListings}>Admin listings</a></li>\n        </ul>\n      </nav>\n    )\n  }\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      redirect: '',\n      token: ''\n    };\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    }\n\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePasswordChange(event) {\n    this.setState({password: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axios({\n      method: 'get',\n      url: '/api/login',\n      auth: {\n        username: this.state.username,\n        password: this.state.password\n      }\n    }).then(response => {\n      console.log(\"logged in!\");\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(`redirecting to ${this.state.redirect}`);\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    return (\n      <div>\n      <p>Don't have an account? <Link to=\"/newaccount\">Sign up</Link></p>\n      {errorMessage}\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"username\">Username</label>\n          <input type=\"text\" id=\"username\" value={this.state.username} onChange={this.handleUsernameChange} />\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" id=\"password\" value={this.state.password} onChange={this.handlePasswordChange} />\n          <input type=\"submit\" value=\"Log in\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nclass CreateAccountPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password1: '',\n      password2: '',\n      redirect: ''\n    };\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePassword1Change = this.handlePassword1Change.bind(this);\n    this.handlePassword2Change = this.handlePassword2Change.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({username: event.target.value});\n  }\n\n  handlePassword1Change(event) {\n    this.setState({password1: event.target.value});\n  }\n\n  handlePassword2Change(event) {\n    this.setState({password2: event.target.value});\n    if (this.state.password1 !== this.state.password2) {\n      this.setState({smallError: 'Passwords must match'});\n    } else {\n      this.setState({smallError: ''});\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (!this.state.username) {\n      this.setState({smallError: 'No username provided'});\n      return;\n    }\n\n    if (this.state.password1 !== this.state.password2) {\n      this.setState({smallError: 'Passwords must match'});\n      return;\n    }\n\n    if (!this.state.password1) {\n      this.setState({smallError: 'No password provided'});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/createaccount',\n      auth: {\n        username: this.state.username,\n        password: this.state.password1\n      }\n    }).then(response => {\n      console.log(\"redirecting to /\")\n      this.setState({redirect: '/', token: response.data.token});\n    }).catch(error => {\n      this.setState({error: error.statusText});\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let errorMessage = this.state.error ? <p>{this.state.error}</p> : <p></p>;\n    let smallErrorMessage = this.state.smallError ? <p>{this.state.smallError}</p> : <p></p>;\n    return (\n      <div>\n      <p>Already have an account? <Link to=\"/login\">Log in</Link></p>\n      {errorMessage}\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"username\">Username</label>\n          <input type=\"text\" id=\"username\" value={this.state.username} onChange={this.handleUsernameChange} />\n          <label htmlFor=\"password1\">Password</label>\n          <input type=\"password\" id=\"password1\" value={this.state.password1} onChange={this.handlePassword1Change} />\n          <label htmlFor=\"password2\">Retype Password</label>\n          <input type=\"password\" id=\"password2\" value={this.state.password2} onChange={this.handlePassword2Change} />\n          <input type=\"submit\" value=\"Create account\" />\n        </form>\n      {smallErrorMessage}\n      </div>\n    );\n  }\n}\n\nclass PlanMealPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing plan meal page\");\n    super(props);\n    this.state = {\n      token: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n  }\n\n  render() {\n    console.log(\"rendering plan meal page\");\n    if (this.state.redirect) {\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: { token: this.state.token }\n      }} />;\n    }\n\n    return (\n      <div>\n        <AppHeader token={this.state.token} />\n        <p>NOTHING TO SEE HERE</p>\n      </div>\n    );\n  }\n}\n\nclass PriceListingPage extends React.Component {\n  constructor(props) {\n    console.log(\"constructing price listings\");\n    super(props);\n    this.state = {\n      ingredientSuggestions: [],\n      unitSuggestions: [],\n      token: '',\n      ingredientSearchTerm: '',\n      unitSearchTerm: '',\n      newIngredientName: '',\n      newIngredientSource: '',\n      newIngredientPrice: 0,\n      newIngredientUnits: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.searchIngredient = this.searchIngredient.bind(this);\n    this.searchUnit = this.searchUnit.bind(this);\n    this.fetchNeededPriceListing = this.fetchNeededPriceListing.bind(this);\n    this.setPrice = this.setPrice.bind(this);\n    this.setAmount = this.setAmount.bind(this);\n    this.selectUnits = this.selectUnits.bind(this);\n    this.selectIngredient = this.selectIngredient.bind(this);\n    this.selectSource = this.selectSource.bind(this);\n    this.addPriceListing = this.addPriceListing.bind(this);\n  }\n\n  searchIngredient(e) {\n    let searchTerm = e.target.value;\n    this.setState({ingredientSearchTerm: searchTerm});\n    if (!searchTerm) {\n      this.setState({ingredientSuggestions: []});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/search/ingredient',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      params: {\n        kw: searchTerm\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({ingredientSuggestions: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  searchUnit(e) {\n    let searchTerm = e.target.value;\n    this.setState({unitSearchTerm: searchTerm});\n    if (!searchTerm) {\n      this.setState({unitSuggestions: []});\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: '/api/search/unit',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      params: {\n        kw: searchTerm\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({unitSuggestions: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  fetchNeededPriceListing() {\n    axios({\n      method: 'get',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({\n        newIngredientName: response.data.result,\n        ingredientSuggestions: []\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  selectIngredient(ingredientName) {\n    this.setState({newIngredientName: ingredientName, ingredientSuggestions: []});\n  }\n\n  selectUnits(units) {\n    this.setState({newIngredientUnits: units, unitSuggestions: []});\n  }\n\n  selectSource(e) {\n    this.setState({newIngredientSource: e.target.value});\n  }\n\n  setPrice(e) {\n    this.setState({newIngredientPrice: e.target.value});\n  }\n\n  setAmount(e) {\n    this.setState({newIngredientAmount: e.target.value});\n  }\n\n  addPriceListing(e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    let newListing = {\n      ingredientName: this.state.newIngredientName,\n      price: this.state.newIngredientPrice,\n      amount: this.state.newIngredientAmount,\n      source: this.state.newIngredientSource,\n      units: this.state.newIngredientUnits\n    };\n\n    ['ingredientName', 'source', 'units'].forEach(field => {\n      if (!newListing[field]) {\n        this.setState({error: `Missing field: ${field}`});\n        return;\n      }\n    });\n\n    if (newListing.price < 0) {\n      this.setState({error: 'Price cannot be negative'});\n      return;\n    }\n\n    if (newListing.amount && newListing.amount < 0) {\n      this.setState({error: 'Amount cannot be negative'});\n      return;\n    }\n\n    axios({\n      method: 'post',\n      url: '/api/pricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: newListing\n    }).then(response => {\n      this.setState({\n        error: '',\n        message: `Price for ${newListing.ingredientName} successfully added!`\n      });\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  render() {\n    console.log(\"rendering price listing page\");\n    if (this.state.redirect) {\n      console.log(\"redirecting\");\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    let ingredientOptions;\n    if (this.state.ingredientSuggestions) {\n      ingredientOptions = (\n        <ul>\n          {this.state.ingredientSuggestions.map(name => (\n            <li><button onClick={() => this.selectIngredient(name)}>{name}</button></li>\n          ))}\n        </ul>\n      );\n    } else {\n      this.ingredientOptions = <div></div>;\n    }\n\n    let unitOptions;\n    if (this.state.unitSuggestions) {\n      unitOptions = (\n        <ul>\n        {this.state.unitSuggestions.map(unit => (\n          <li><button onClick={() => this.selectUnits(unit)}>{unit}</button></li>\n        ))}\n        </ul>\n      );\n    } else {\n      unitOptions = <div></div>;\n    }\n\n    let form;\n    console.log(this.state);\n    if (this.state.newIngredientName && this.state.newIngredientUnits) {\n      form = (\n          <div>\n          <form onSubmit={this.addPriceListing}>\n            <p>{this.state.newIngredientName}</p>\n            <label htmlFor=\"source\">Source</label>\n            <input type=\"text\" id=\"source\" value={this.state.newIngredientSource} onChange={this.selectSource} />\n            <label htmlFor=\"price\">Price</label>\n            $<input type=\"number\" id=\"price\" min=\"0\" step=\"0.01\" value={this.state.newIngredientPrice} onChange={this.setPrice}/>\n            <label htmlFor=\"amount\">Amount</label>\n            <input type=\"number\" id=\"amount\" min=\"0\" value={this.state.newIngredientAmount} onChange={this.setAmount}/>\n            <p>{this.state.newIngredientUnits}</p>\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        </div>\n      );\n    } else {\n      form = <div></div>;\n    }\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} />\n        <label htmlFor=\"searchIngredient\">Search for an ingredient to add a price listing for:</label>\n        <input id=\"searchIngredient\" value={this.ingredientSearchTerm} onChange={this.searchIngredient}/>\n        {ingredientOptions}\n        <button onClick={this.fetchNeededPriceListing}>Choose for me</button>\n        <label htmlFor=\"searchUnit\">Select Units</label>\n        <input id=\"searchUnit\" value={this.unitSearchTerm} onChange={this.searchUnit} />\n        {unitOptions}\n        <hr />\n        {form}\n        {this.state.error}\n      </div>\n    );\n  }\n}\n\nclass PriceListingAdminPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      priceListings: [],\n      token: '',\n      redirect: ''\n    };\n\n    if (this.props.location.state && this.props.location.state.token) {\n      this.state.token = this.props.location.state.token;\n    } else {\n      this.state.redirect = '/login';\n    }\n\n    this.fetchListings();\n  }\n\n  fetchListings() {\n    axios({\n      method: 'get',\n      url: '/api/adminpricelistings',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      this.setState({priceListings: response.data.results});\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        this.setState({error: 'Not an admin'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  updateListing(listing) {\n    axios({\n      method: 'post',\n      url: '/api/adminpricelistings/update',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated,\n        price: listing.price,\n        units: listing.units\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        this.setState({error: 'Not an admin'});\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  deleteListing(listing) {\n    axios({\n      method: 'post',   // we could use delete, but eh\n      url: '/api/adminpricelistings/delete',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      },\n      data: {\n        ingredientName: listing.ingredientName,\n        source: listing.source,\n        timeCreated: listing.timeCreated\n      }\n    }).then(response => {\n      this.fetchListings();\n\n    }).catch(error => {\n      if (error.status === 401) {\n        this.setState({redirect: '/login'});\n      } else if (error.status === 403) {\n        // TODO: forbidden response\n      } else {\n        this.setState({error: error.data.error});\n      }\n    });\n  }\n\n  updateListingLocally(listing, price, units) {\n    console.log(listing);\n    this.setState({priceListings: this.state.priceListings.map(l => {\n      if (l.ingredientName === listing.ingredientName &&\n        l.source === listing.source &&\n        l.timeCreated === listing.timeCreated) {\n        return {\n          ingredientName: l.ingredientName,\n          source: l.source,\n          timeCreated: l.timeCreated,\n          price: price,\n          units: units\n        };\n      }\n\n      return l;\n    })});\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(\"redirecting\");\n      return <Redirect to={{\n        pathname: this.state.redirect,\n        state: {token: this.state.token}\n      }} />;\n    }\n\n    // TODO: paginate\n    const listings = this.state.priceListings.map(listing =>\n      <tr key={`${listing.ingredientName}:${listing.source}:${listing.timeCreated}`}>\n        <td>{listing.ingredientName}</td>\n        <td>$<input type=\"number\" min=\"0\" step=\"0.01\" value={listing.price} onChange={e => this.updateListingLocally(listing, e.target.value, listing.units)} /></td>\n        <td><input type=\"text\" value={listing.units} onChange={e => this.updateListingLocally(listing, listing.price, e.target.value)} /></td>\n        <td>{listing.source}</td>\n        <td>{listing.timeCreated}</td>\n        <td><button onClick={() => this.updateListing(listing)}>Update</button></td>\n        <td><button onClick={() => this.deleteListing(listing)}>X</button></td>\n      </tr>\n    );\n\n    return (\n      <div>\n      <AppHeader token={this.state.token} />\n        <table>\n          <tr>\n            <th>Ingredient Name</th>\n            <th>Price</th>\n            <th>Units</th>\n            <th>Source</th>\n            <th>Time Created</th>\n            <th></th>\n            <th></th>\n          </tr>\n          {listings}\n        </table>\n        <p>{this.state.error}</p>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(App(), document.getElementById(\"root\"));\n"],"sourceRoot":""}